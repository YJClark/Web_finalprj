
   var knives = {
    "PocketKnife": [
        { id: "PK001", price: 850, imgSrc: "PK001.jpg" },
        { id: "PK002", price: 900, imgSrc: "PK002.jpg" },
        { id: "PK003", price: 950, imgSrc: "PK003.jpg" },
        { id: "PK004", price: 850, imgSrc: "PK004.jpg" },
        { id: "PK005", price: 900, imgSrc: "PK005.jpg" },
        { id: "PK006", price: 950, imgSrc: "PK006.jpg" },
        { id: "PK007", price: 850, imgSrc: "PK007.jpg" },
        { id: "PK008", price: 900, imgSrc: "PK008.jpg" },
        { id: "PK009", price: 950, imgSrc: "PK009.jpg" } 
    ],
    "HuntingKnife": [
        { id: "HK001", price: 1000, imgSrc: "HK001.jpg" },
        { id: "HK002", price: 1050, imgSrc: "HK002.jpg" },
        { id: "HK003", price: 1100, imgSrc: "HK003.jpg" },
        { id: "HK004", price: 1000, imgSrc: "HK004.jpg" },
        { id: "HK005", price: 1050, imgSrc: "HK005.jpg" },
        { id: "HK006", price: 1100, imgSrc: "HK006.jpg" },
        { id: "HK007", price: 1000, imgSrc: "HK007.jpg" },
        { id: "HK008", price: 1050, imgSrc: "HK008.jpg" },
        { id: "HK009", price: 1100, imgSrc: "HK009.jpg" }
    ],
    'CombatKnife':[
        { id: "CK001", price: 1200, imgSrc: "CK001.jpg" },
        { id: "CK002", price: 1250, imgSrc: "CK002.jpg" },
        { id: "CK003", price: 1300, imgSrc: "CK003.jpg" },
        { id: "CK004", price: 1200, imgSrc: "CK004.jpg" },
        { id: "CK005", price: 1250, imgSrc: "CK005.jpg" },
        { id: "CK006", price: 1300, imgSrc: "CK006.jpg" },
        { id: "CK007", price: 1200, imgSrc: "CK007.jpg" },
        { id: "CK008", price: 1250, imgSrc: "CK008.jpg" },
        { id: "CK009", price: 1300, imgSrc: "CK009.jpg" }
    ],
    "TacticalKnife": [
        { id: "TK001", price: 1400, imgSrc: "TK001.jpg" },
        { id: "TK002", price: 1450, imgSrc: "TK002.jpg" },
        { id: "TK003", price: 1500, imgSrc: "TK003.jpg" },
        { id: "TK004", price: 1400, imgSrc: "TK004.jpg" },
        { id: "TK005", price: 1450, imgSrc: "TK005.jpg" },
        { id: "TK006", price: 1500, imgSrc: "TK006.jpg" },
        { id: "TK007", price: 1400, imgSrc: "TK007.jpg" },
        { id: "TK008", price: 1450, imgSrc: "TK008.jpg" },
        { id: "TK009", price: 1500, imgSrc: "TK009.jpg" }
    ]
};

var swords = {
    "Katana": [
        { id: "KT001", price: 1200, imgSrc: "KT001.jpg" },
        { id: "KT002", price: 1250, imgSrc: "KT002.jpg" },
        { id: "KT003", price: 1300, imgSrc: "KT003.jpg" },
        { id: "KT004", price: 1200, imgSrc: "KT004.jpg" },
        { id: "KT005", price: 1250, imgSrc: "KT005.jpg" },
        { id: "KT006", price: 1250, imgSrc: "KT006.jpg" },
		{ id: "KT006", price: 1300, imgSrc: "KT006.jpg" },
        { id: "KT007", price: 1200, imgSrc: "KT007.jpg" },
        { id: "KT008", price: 1250, imgSrc: "KT008.jpg" },
        { id: "KT009", price: 1300, imgSrc: "KT009.jpg" }
    ],
    "Longsword": [
        { id: "LS001", price: 1400, imgSrc: "LS001.jpg" },
        { id: "LS002", price: 1450, imgSrc: "LS002.jpg" },
        { id: "LS003", price: 1500, imgSrc: "LS003.jpg" },
        { id: "LS004", price: 1400, imgSrc: "LS004.jpg" },
        { id: "LS005", price: 1450, imgSrc: "LS005.jpg" },
        { id: "LS006", price: 1500, imgSrc: "LS006.jpg" },
        { id: "LS007", price: 1400, imgSrc: "LS007.jpg" },
        { id: "LS008", price: 1450, imgSrc: "LS008.jpg" },
        { id: "LS009", price: 1500, imgSrc: "LS009.jpg" }
    ]
};

var axe = {
    "Hatchet": [
        { id: "HT001", price: 900, imgSrc: "HT001.jpg" },
        { id: "HT002", price: 950, imgSrc: "HT002.jpg" },
        { id: "HT003", price: 1000, imgSrc: "HT003.jpg" },
        { id: "HT004", price: 900, imgSrc: "HT004.jpg" },
        { id: "HT005", price: 950, imgSrc: "HT005.jpg" },
        { id: "HT006", price: 1000, imgSrc: "HT006.jpg" },
        { id: "HT007", price: 900, imgSrc: "HT007.jpg" },
        { id: "HT008", price: 950, imgSrc: "HT008.jpg" },
        { id: "HT009", price: 1000, imgSrc: "HT009.jpg" }
    ],
    "BattleAxe": [
        { id: "BA001", price: 1100, imgSrc: "BA001.jpg" },
        { id: "BA002", price: 1150, imgSrc: "BA002.jpg" },
        { id: "BA003", price: 1200, imgSrc: "BA003.jpg" },
        { id: "BA004", price: 1100, imgSrc: "BA004.jpg" },
    ],
    "ThrowingAxe": [
        { id: "TA001", price: 1000, imgSrc: "TA001.jpg" },
        { id: "TA002", price: 1050, imgSrc: "TA002.jpg" },
        { id: "TA003", price: 1100, imgSrc: "TA003.jpg" },
        { id: "TA004", price: 1000, imgSrc: "TA004.jpg" },
        { id: "TA005", price: 1050, imgSrc: "TA005.jpg" },
        { id: "TA006", price: 1100, imgSrc: "TA006.jpg" },
        { id: "TA007", price: 1000, imgSrc: "TA007.jpg" },
        { id: "TA008", price: 1050, imgSrc: "TA008.jpg" },
        { id: "TA009", price: 1100, imgSrc: "TA009.jpg" }
    ]
};

function createProductTable(knifeType, knifeItems) {
    var container = document.querySelector('.product-table-container');

    var table = document.createElement('table');
    table.classList.add('product-table');
    table.id = knifeType;

    var rowNum = Math.ceil(knifeItems.length / 3);

    for (var i = 0; i < rowNum; i++) {
        var tr = document.createElement('tr');

        for (var j = 0; j < 3; j++) {
            var index = i * 3 + j;
            if (index < knifeItems.length) {
                var knife = knifeItems[index];

                var td = document.createElement('td');
                td.id = knife.id;
                td.classList.add('product-item');

                var img = document.createElement('img');
                img.src = "images/"+knife.imgSrc;
                img.alt = "Item " + knife.id;

                var p = document.createElement('p');
                p.innerHTML = "Item No. " + knife.id + "<br>Price: â‚©" + knife.price;

                var button = document.createElement('button');
                button.classList.add('buy-button');
                button.textContent = "Buy Now";
                button.setAttribute('onclick', 'updatePrice(' + knife.price + ', "' + knife.imgSrc + '")');

                td.appendChild(img);
                td.appendChild(p);
                td.appendChild(button);

                tr.appendChild(td);
            }
        }

        table.appendChild(tr);
    }

    container.appendChild(table);
}

    Object.keys(knives).forEach(knifeType => {
        createProductTable(knifeType, knives[knifeType]);
    });
	Object.keys(swords).forEach(knifeType => {
        createProductTable(knifeType, swords[knifeType]);
    });
	 
	Object.keys(axe).forEach(knifeType => {
        createProductTable(knifeType, axe[knifeType]);
    });
        $('table').hide();
        function showItem(cata){
            $('main span').each(function(index, element) {
                $(element).removeClass('active');
            });
            $(cata).addClass('active');

            $('.knife-list').empty();
            var categories = {
                "Knife": ['PocketKnife', 'HuntingKnife', 'CombatKnife', 'TacticalKnife'],
                "Sword": ['Katana', 'Longsword'	],
                "Axe": ['Hatchet', 'BattleAxe', 'ThrowingAxe'],
            };
            
            var knives = categories[cata.innerHTML];
            var ul = $('<ul></ul>');
            for (var i = 0 ; i < knives.length ; i++) {   
                var li = $('<li onclick="showTable(this)" class="' + cata.innerHTML.replace(/\s+/g, '') + '">' + knives[i] + '</li>');
                ul.append(li);
            }
            $('#' + (cata.innerHTML === "Knife" ? 1 : 
                      cata.innerHTML === "Sword" ? 2 : 
                      cata.innerHTML === "Axe" ? 3 : 
                      cata.innerHTML === "Machete" ? 4 : 5
                     )).append(ul);
					  Object.keys(knives).forEach(knifeType => {
					createProductTable(knives[i], knives[knifeType]);
				});

        }

        function showTable(knife){
            $('table').hide();
            var knifeType = $(knife).text();
            $('table#' + knifeType.replace(/\s+/g, '')).show();
            
            $('li').removeClass('active');
            $(knife).addClass('active');
        }
		$(document).ready(function(){
    $(document).click(function(e){
        var gunshot = $('<div class="gunshot"></div>');
        gunshot.css({
            position: 'fixed',
            top: e.pageY - 5,
            left: e.pageX - 5,
            width: '10px',
            height: '10px',
            background: 'url("hole.jpg")',
            borderRadius: '50%',
            zIndex: '9999'
        });
        $('body').append(gunshot);
        gunshot.fadeOut(1000, function(){
            $(this).remove();
        });
    });
});
 function updatePrice(price, itemImage) {
			var type;
			type = 'weapon';
            window.parent.postMessage({ type: 'priceUpdate', price: price ,itemImage: itemImage, itemType: type}, '*');
        }
